---
import { get_api_route } from "../../config/global";
import Loader from "../../components/common/Loader.astro";
import SectionTitle from "@components/common/SectionTitle.astro";
import CommonHead from "@components/common/CommonHead.astro";
import CommonHeader from "@components/common/CommonHeader.astro";
import Footer from "@components/footer/Footer.astro";
import Next from "@components/common/Next.astro";
import BackButton from "@components/patrician-publications/BackButton.astro";
import { get_api_route } from "@config/global";

import "@fontsource/space-grotesk/400.css";
import "@fontsource/space-grotesk/700.css";
import "@fontsource/space-mono/400.css";
import MobileNavButton from "@components/common/MobileNavButton.astro";

// TODO: need replace with next article
const nexts = [];
---

<html lang="en">
<CommonHead
    title="Patrician Publications by SPC Media Unit"
/>

<body x-data="{open:false}" class="cursor-default bg-spc-dark text-spc-light font-sans">
<CommonHeader title="Patrician<br/>Publications" />
<div class="md:px-12 xl:px-96">
    <section class="px-6">
        <BackButton />
    </section>

    <div hx-get={get_api_route("read-blog-html")}
         hx-trigger="load"
         hx-swap="innerHTML">
        <Loader />
    </div>
</div>

<Footer />
<MobileNavButton />

<script
    is:inline
    src="https://unpkg.com/htmx.org@1.9.11"
    integrity="sha384-0gxUXCCR8yv9FM2b+U3FDbsKthCI66oH5IA9fHppQq9DDMHuMauqq1ZHBpJxQ0J0"
    crossorigin="anonymous">
</script>

<script is:inline>
    document.body.addEventListener("htmx:configRequest", function(e) {
        const queryStr = window.location.search;
        const searchParams = new URLSearchParams(queryStr);
        e.detail.parameters["path"] = "/blogs/entry?p=" + searchParams.get("p");
    });
</script>
</body>
</html>
